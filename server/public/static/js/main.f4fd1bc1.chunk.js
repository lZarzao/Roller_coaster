(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{66:function(e,t,a){e.exports=a(96)},95:function(e,t,a){},96:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(22),l=a.n(s),o=a(6),c=a(8),i=a(10),u=a(9),h=a(11),m=a(28),d=a(31),p=a.n(d),g=function e(){var t=this;Object(o.a)(this,e),this.signup=function(e,a){return t._service.post("/signup",{username:e,password:a})},this.login=function(e,a){return t._service.post("/login",{username:e,password:a})},this.logout=function(){return t._service.post("/logout")},this.loggedin=function(){return t._service.get("/loggedin")},this._service=p.a.create({baseURL:"".concat("https://roller-coaster.herokuapp.com/api","/auth"),withCredentials:!0})},E=function e(){var t=this;Object(o.a)(this,e),this.getAllCoasters=function(){return t._service.get("/getAllCoasters")},this.getOneCoaster=function(e){return t._service.get("/".concat(e))},this.postCoaster=function(e){return t._service.post("/new",e)},this.putCoaster=function(e,a){return t._service.post("/edit/".concat(e),a)},this.deleteCoaster=function(e){return t._service.get("/delete/".concat(e))},this._service=p.a.create({baseURL:"".concat("https://roller-coaster.herokuapp.com/api","/coasters"),withCredentials:!0})},b=a(99),v=a(98),f=a(100),C=a(101),w=a(36),O=a(12),j=function(e){function t(e){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).call(this,e))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(w.a,{className:"coaster-card",md:4},r.a.createElement("img",{src:this.props.coaster.imageUrl,alt:this.props.coaster.title}),r.a.createElement("h3",null,this.props.coaster.title),r.a.createElement("p",null,this.props.coaster.description),r.a.createElement("small",null,"Inversiones: ",this.props.coaster.inversions," | Longitud: ",this.props.coaster.length),r.a.createElement("br",null),r.a.createElement(O.b,{className:"btn btn-sm btn-dark",to:"/coasters/".concat(this.props.coaster._id)},"Ver detalles"))}}]),t}(r.a.Component),U=a(19),I=a(30),S=a(102),k=function e(){var t=this;Object(o.a)(this,e),this.handleUpload=function(e){return t._service.post("/upload",e)},this._service=p.a.create({baseURL:"".concat("https://roller-coaster.herokuapp.com/api","/files"),withCredentials:!0})},y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a._coastersService.postCoaster(a.state.coaster).then((function(e){a.props.closeModalWindow(),a.props.updateCoastersList()})).catch((function(e){return console.log(e)}))},a.handleInputChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState({coaster:Object(I.a)({},a.state.coaster,Object(U.a)({},n,r))})},a.handleFileUpload=function(e){a.setState({disabledButton:!0,buttonText:"Subiendo imagen..."});var t=new FormData;t.append("imageUrl",e.target.files[0]),a._filesService.handleUpload(t).then((function(e){console.log("Subida de archivo finalizada! La URL de Cloudinray es: ",e.data.secure_url),a.setState({disabledButton:!1,buttonText:"Guardar",coaster:Object(I.a)({},a.state.coaster,{imageUrl:e.data.secure_url})})})).catch((function(e){return console.log(e)}))},a._coastersService=new E,a._filesService=new k,a.state={disabledButton:!1,buttonText:"Guardar",coaster:{title:"",description:"",inversions:0,length:0,imageUrl:""}},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(S.a,{onSubmit:this.handleSubmit},r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Label,null,"Nombre"),r.a.createElement(S.a.Control,{type:"text",name:"title",onChange:this.handleInputChange,value:this.state.coaster.title})),r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Label,null,"Descripci\xf3n"),r.a.createElement(S.a.Control,{type:"text",name:"description",onChange:this.handleInputChange,value:this.state.coaster.description})),r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Label,null,"Longitud"),r.a.createElement(S.a.Control,{type:"number",name:"length",onChange:this.handleInputChange,value:this.state.coaster.length})),r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Label,null,"Inversiones"),r.a.createElement(S.a.Control,{type:"number",name:"inversions",onChange:this.handleInputChange,value:this.state.coaster.inversions})),r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Label,null,"Imagen URL (archivo)"),r.a.createElement(S.a.Control,{name:"imageUrl",type:"file",onChange:this.handleFileUpload})),r.a.createElement(v.a,{variant:"dark",size:"sm",type:"submit",disabled:this.state.disabledButton},this.state.buttonText))}}]),t}(n.Component),_=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){return a.updateCoastersList()},a.updateCoastersList=function(){a._service.getAllCoasters().then((function(e){return a.setState({coasters:e.data})})).catch((function(e){return console.log("Error",e)}))},a.handleShow=function(){return a.setState({showModalWindow:!0})},a.handleClose=function(){return a.setState({showModalWindow:!1})},a._service=new E,a.state={coasters:[],showModalWindow:!1},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(b.a,null,r.a.createElement("h1",null,"\xcdndice de monta\xf1as rusas"),r.a.createElement("hr",null),this.props.loggedInUser&&r.a.createElement(v.a,{variant:"dark",onClick:this.handleShow},"Nuevo"),r.a.createElement(f.a,null,this.state.coasters.map((function(t){return r.a.createElement(j,{key:t._id,coaster:t,history:e.props.history})})))),r.a.createElement(C.a,{show:this.state.showModalWindow,onHide:this.handleClose},r.a.createElement(C.a.Header,{closeButton:!0},r.a.createElement(C.a.Title,null,"Nueva monta\xf1a rusa")),r.a.createElement(C.a.Body,null,r.a.createElement(y,{closeModalWindow:this.handleClose,updateCoastersList:this.updateCoastersList}))))}}]),t}(r.a.Component),L=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a._coastersService.putCoaster(a.props.coaster._id,a.state.coaster).then((function(e){a.props.closeModalWindow(),a.props.updateCoaster()})).catch((function(e){return console.log(e)}))},a.handleInputChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState({coaster:Object(I.a)({},a.state.coaster,Object(U.a)({},n,r))})},a._coastersService=new E,a.state={disabledButton:!1,buttonText:"Guardar",coaster:{title:a.props.coaster.title,description:a.props.coaster.description,inversions:a.props.coaster.inversions,length:a.props.coaster.length,imageUrl:a.props.coaster.imageUrl}},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(S.a,{onSubmit:this.handleSubmit},r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Label,null,"Nombre"),r.a.createElement(S.a.Control,{type:"text",name:"title",onChange:this.handleInputChange,value:this.state.coaster.title})),r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Label,null,"Descripci\xf3n"),r.a.createElement(S.a.Control,{type:"text",name:"description",onChange:this.handleInputChange,value:this.state.coaster.description})),r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Label,null,"Longitud"),r.a.createElement(S.a.Control,{type:"number",name:"length",onChange:this.handleInputChange,value:this.state.coaster.length})),r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Label,null,"Inversiones"),r.a.createElement(S.a.Control,{type:"number",name:"inversions",onChange:this.handleInputChange,value:this.state.coaster.inversions})),r.a.createElement(v.a,{variant:"dark",size:"sm",type:"submit",disabled:this.state.disabledButton},this.state.buttonText))}}]),t}(n.Component),T=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){var e=a.props.match.params.id;a._service.getOneCoaster(e).then((function(e){return a.setState({coaster:e.data})})).catch((function(e){return console.log(e)}))},a.handleShow=function(){return a.setState({showModalWindow:!0})},a.handleClose=function(){return a.setState({showModalWindow:!1})},a.updateCoaster=function(){var e=a.props.match.params.id;a._service.getOneCoaster(e).then((function(e){return a.setState({coaster:e.data})})).catch((function(e){return console.log("Error",e)}))},a.deleteCoaster=function(){var e=a.props.match.params.id;a._service.deleteCoaster(e).then((function(){return a.props.history.push("/coasters")})).catch((function(e){return console.log("Error",e)}))},a.fetchUser=function(){null===a.state.loggedInUser&&a._authService.loggedin().then((function(e){return a.setState({loggedInUser:e.data})})).catch((function(e){a.setState({loggedInUser:!1}),console.log({err:e})}))},a.state={coaster:{},showModalWindow:!1,loggedInUser:null},a._service=new E,a._authService=new g,a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.fetchUser(),r.a.createElement(b.a,{className:"coaster-details"},r.a.createElement("h1",null,this.state.coaster.title),r.a.createElement("hr",null),r.a.createElement("section",null,r.a.createElement(f.a,null,r.a.createElement(w.a,{md:6},r.a.createElement("h2",null,"Detalles"),r.a.createElement("p",null,r.a.createElement("strong",null,"Descripci\xf3n:")," ",this.state.coaster.description),r.a.createElement("hr",null),r.a.createElement("p",null,r.a.createElement("small",null,"Longitud:")," ",this.state.coaster.length," | Inversiones: ",this.state.coaster.inversions),r.a.createElement(O.b,{to:"/coasters",className:"btn btn-dark"},"Volver")),r.a.createElement(w.a,{md:{span:4,offset:2}},r.a.createElement("img",{src:this.state.coaster.imageUrl,alt:this.state.coaster.title}),r.a.createElement("hr",null),r.a.createElement("div",{className:"btnFlex"},this.state.loggedInUser&&r.a.createElement(v.a,{variant:"dark",onClick:this.deleteCoaster},"Editar"),this.state.loggedInUser&&r.a.createElement(v.a,{variant:"dark",onClick:this.deleteCoaster},"Eliminar")))),r.a.createElement(C.a,{show:this.state.showModalWindow,onHide:this.handleClose},r.a.createElement(C.a.Header,{closeButton:!0},r.a.createElement(C.a.Title,null,"Editar monta\xf1a rusa")),r.a.createElement(C.a.Body,null,r.a.createElement(L,{closeModalWindow:this.handleClose,updateCoaster:this.updateCoaster,coaster:this.state.coaster})))))}}]),t}(n.Component),x=a(105),B=a(103),M=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).logoutUser=function(){a._service.logout().then((function(e){return a.props.setUser(!1)})).catch((function(e){return console.log(e)}))},a._service=new g,a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.loggedInUser?this.props.loggedInUser.username:"invitado";return this.props.loggedInUser?r.a.createElement(x.a,{bg:"dark",variant:"dark",expand:"md"},r.a.createElement(x.a.Brand,null,"Coaster Time!"),r.a.createElement(x.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(x.a.Collapse,null,r.a.createElement(B.a,{className:"mr-auto"},r.a.createElement(B.a.Link,{as:"li"},r.a.createElement(O.b,{to:"/"},"Inicio")),r.a.createElement(B.a.Link,{as:"li"},r.a.createElement(O.b,{to:"/profile"},"Mi perfil")),r.a.createElement(B.a.Link,{as:"li"},r.a.createElement(O.b,{to:"/coasters"},"Monta\xf1as rusas")),r.a.createElement(B.a.Link,{as:"li",className:"pointer",onClick:this.logoutUser},"Logout")),r.a.createElement(B.a,{className:"ml-auto"},r.a.createElement(x.a.Text,null,"Bienvenido ",e)))):r.a.createElement(x.a,{bg:"dark",variant:"dark",expand:"md"},r.a.createElement(x.a.Brand,null,"Coaster Time!"),r.a.createElement(x.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(x.a.Collapse,null,r.a.createElement(B.a,{className:"mr-auto"},r.a.createElement(B.a.Link,{as:"li"},r.a.createElement(O.b,{to:"/"},"Inicio")),r.a.createElement(B.a.Link,{as:"li"},r.a.createElement(O.b,{to:"/coasters"},"Monta\xf1as rusas")),r.a.createElement(B.a.Link,{as:"li"},r.a.createElement(O.b,{to:"/signup"},"Registro")),r.a.createElement(B.a.Link,{as:"li"},r.a.createElement(O.b,{to:"/login"},"Login"))),r.a.createElement(B.a,{className:"ml-auto"},r.a.createElement(x.a.Text,null,"Bienvenido ",e))))}}]),t}(n.Component),G=function(){return r.a.createElement(b.a,null,r.a.createElement("h1",null,"Coaster App!"),r.a.createElement("hr",null),r.a.createElement("p",null,"Diversi\xf3n con React"),r.a.createElement("img",{className:"fpimg",src:"https://res.cloudinary.com/dwnz2epom/image/upload/v1586031816/coasters/rollerCoaster_wklhqv.jpg",alt:"RollerCoaster"}))},N=function(e){return r.a.createElement(b.a,null,r.a.createElement("h1",null,"Bienvenido ",e.loggedInUser.username),r.a.createElement("hr",null))},W=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.password;a._service.signup(n,r).then((function(e){a.props.setUser(e.data),a.setState({username:"",password:""}),a.props.history.push("/coasters")})).catch((function(e){return console.log(e.response.data.message)}))},a.handleInputChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(U.a)({},n,r))},a._service=new g,a.state={username:"",password:""},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(b.a,null,r.a.createElement("h1",null,"Registro"),r.a.createElement("hr",null),r.a.createElement(S.a,{onSubmit:this.handleSubmit},r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Label,null,"Usuario"),r.a.createElement(S.a.Control,{type:"text",name:"username",onChange:this.handleInputChange,value:this.state.username})),r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Label,null,"Contrase\xf1a"),r.a.createElement(S.a.Control,{type:"password",name:"password",onChange:this.handleInputChange,value:this.state.password})),r.a.createElement(v.a,{variant:"dark",type:"submit"},"Registrar")))}}]),t}(n.Component),D=a(104),R=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState({user:Object(I.a)({},a.state.user,Object(U.a)({},n,r))})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.user,n=t.username,r=t.password;a._service.login(n,r).then((function(e){a.props.setUser(e.data),a.setState({username:"",password:""}),a.props.history.push("/coasters")})).catch((function(e){a.handleToastOpen(e.response.data.message)}))},a.handleToastClose=function(){return a.setState({showToast:!1,toastText:""})},a.handleToastOpen=function(e){return a.setState({showToast:!0,toastText:e})},a._service=new g,a.state={showToast:!1,toastText:"",user:{username:"",password:""}},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(b.a,null,r.a.createElement("h1",null,"Iniciar sesi\xf3n"),r.a.createElement("hr",null),r.a.createElement(S.a,{onSubmit:this.handleSubmit},r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Label,null,"Usuario"),r.a.createElement(S.a.Control,{type:"text",name:"username",onChange:this.handleInputChange,value:this.state.username})),r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Label,null,"Contrase\xf1a"),r.a.createElement(S.a.Control,{type:"password",name:"password",onChange:this.handleInputChange,value:this.state.password})),r.a.createElement(v.a,{variant:"dark",type:"submit"},"Iniciar")),r.a.createElement(D.a,{onClose:this.handleToastClose,show:this.state.showToast,delay:3e3,autohide:!0,style:{position:"fixed",right:"10px",bottom:"10px",minWidth:"250px"}},r.a.createElement(D.a.Header,null,r.a.createElement("strong",{className:"mr-auto"},"Error"),r.a.createElement("small",null,"Session manager")),r.a.createElement(D.a.Body,null,this.state.toastText)))}}]),t}(n.Component),F=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).setTheUser=function(t){e.setState({loggedInUser:t})},e.fetchUser=function(){null===e.state.loggedInUser&&e._service.loggedin().then((function(t){return e.setState({loggedInUser:t.data})})).catch((function(t){e.setState({loggedInUser:!1}),console.log({err:t})}))},e.state={loggedInUser:null},e._service=new g,e}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return this.fetchUser(),r.a.createElement(r.a.Fragment,null,r.a.createElement(M,{loggedInUser:this.state.loggedInUser,setUser:this.setTheUser}),r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,path:"/",component:G}),r.a.createElement(m.b,{exact:!0,path:"/coasters",render:function(){return r.a.createElement(_,{loggedInUser:e.state.loggedInUser})}}),r.a.createElement(m.b,{path:"/coasters/:id",component:T}),r.a.createElement(m.b,{path:"/form",component:y}),r.a.createElement(m.b,{path:"/signup",render:function(t){return r.a.createElement(W,Object.assign({setUser:e.setTheUser},t))}}),r.a.createElement(m.b,{path:"/login",render:function(t){return r.a.createElement(R,Object.assign({setUser:e.setTheUser},t))}}),r.a.createElement(m.b,{path:"/profile",render:function(){return e.state.loggedInUser?r.a.createElement(N,{loggedInUser:e.state.loggedInUser}):r.a.createElement(m.a,{to:"/"})}})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(94),a(95);l.a.render(r.a.createElement(O.a,null,r.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[66,1,2]]]);
//# sourceMappingURL=main.f4fd1bc1.chunk.js.map